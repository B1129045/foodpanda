<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Foodpanda 模擬結帳頁面</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            background-color: #f7f7f7;
        }

        h2 {
            color: #333;
        }

        #checkout-container {
            display: flex;
            flex-direction: row;
            justify-content: center;
            padding: 30px;
            gap: 20px;
        }

        #checkout-page {
            flex: 1;
            max-width: 600px;
            padding: 20px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        #checkout-summary-container {
            width: 300px;
            padding: 20px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            height: fit-content;
        }

        #checkout-summary {
            margin-bottom: 20px;
        }

        .item-row {
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #ddd;
        }

        .item-name {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .item-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 5px;
        }

        .item-controls button {
            width: 30px;
            height: 30px;
            font-size: 16px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #f1f1f1;
            cursor: pointer;
        }

        .item-controls button:hover {
            background-color: #e6e6e6;
        }

        .item-price {
            font-size: 14px;
            color: #555;
        }

        #cart-total {
            text-align: right;
            font-size: 18px;
            font-weight: bold;
            color: #ff5a5f; /* FOODPANDA 粉色 */
        }

        #delivery-options {
            margin: 20px 0;
            padding: 15px;
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .delivery-option {
            display: flex;
            align-items: center;
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
        }

        .delivery-option:hover {
            border-color: #ff5a5f;
        }

        .delivery-option input {
            margin-right: 10px;
        }

        .delivery-option.selected {
            border-color: #ff5a5f;
            background-color: #fff3f3;
        }

        #payment-method-options {
            margin: 20px 0;
        }

        .payment-option {
            display: flex;
            align-items: center;
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
        }

        .payment-option:hover {
            border-color: #ff5a5f;
        }

        .payment-option input {
            margin-right: 10px;
        }

        .payment-option img {
            height: 30px;
            margin-right: 10px;
        }

        #checkout-form label {
            display: block;
            margin: 10px 0 5px;
            font-weight: bold;
        }

        #checkout-form input,
        #checkout-form select {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }

        #checkout-form button {
            width: 100%;
            padding: 15px;
            background-color: #ff5a5f;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 18px;
            cursor: pointer;
            margin-top: 10px;
        }

        #checkout-form button:hover {
            background-color: #e0484c;
        }
    </style>
</head>

<body>
    <div id="checkout-container">
        <div id="checkout-page">
            <h2>結帳</h2>

            <!-- 外送選項 -->
            <div id="delivery-options">
                <h3>外送選項</h3>
                <div class="delivery-option">
                    <input type="radio" name="delivery" id="standard-delivery" value="standard" checked>
                    <label for="standard-delivery">標準 約 30 - 45 分鐘</label>
                </div>
                <div class="delivery-option">
                    <input type="radio" name="delivery" id="priority-delivery" value="priority">
                    <label for="priority-delivery">優先專送 約 25 - 40 分鐘 + $29</label>
                </div>
                <div class="delivery-option">
                    <input type="radio" name="delivery" id="scheduled-delivery" value="scheduled">
                    <label for="scheduled-delivery">預約訂單 選擇日期及時間</label>
                </div>
            </div>

            <!-- 付款方式 -->
            <div id="payment-method-options">
                <h3>付款方式</h3>
                <div class="payment-option">
                    <input type="radio" name="payment-method" id="cash-payment" value="cash">
                    <img src="https://via.placeholder.com/50x30?text=現金" alt="現金圖示">
                    <label for="cash-payment">現金付款</label>
                </div>
                <div class="payment-option">
                    <input type="radio" name="payment-method" id="credit-card-payment" value="credit-card">
                    <img src="https://via.placeholder.com/50x30?text=信用卡" alt="信用卡圖示">
                    <label for="credit-card-payment">
                        信用卡
                    </label>
                </div>
                <div class="payment-option">
                    <input type="radio" name="payment-method" id="line-pay-payment" value="line-pay">
                    <img src="https://via.placeholder.com/50x30?text=LINE+PAY" alt="LINE PAY 圖示">
                    <label for="line-pay-payment">LINE PAY</label>
                </div>
            </div>

            <!-- 表單開始 -->
            <form id="checkout-form">
                <label for="address">送餐地址</label>
                <input type="text" id="address" name="address" placeholder="請輸入送餐地址" required>

                <label for="name">姓名</label>
                <input type="text" id="name" name="name" required>

                <label for="phone">電話</label>
                <input type="tel" id="phone" name="phone" required>

                <button type="submit">確認訂單</button>
            </form>
        </div>

        <div id="checkout-summary-container">
            <h3>您的訂單</h3>
            <div id="checkout-summary">
                <div id="cart-summary-items">
                    <!-- 這裡會顯示訂購商品 -->
                </div>
                <div id="cart-total">
                    總金額: <strong>0 元</strong>
                </div>
            </div>
        </div>
    </div>

    <script>
        let cart = JSON.parse(localStorage.getItem('cart')) || [];

        // 渲染訂購商品摘要
        function renderCartSummary() {
            const summaryContainer = document.getElementById('cart-summary-items');
            const totalRow = document.getElementById('cart-total');
            let totalPrice = 0;

            summaryContainer.innerHTML = ''; // 清空舊內容

            cart.forEach((item, index) => {
                const itemRow = document.createElement('div');
                itemRow.className = 'item-row';
                itemRow.innerHTML = `
                    <div class="item-name">${item.name}</div>
                    <div class="item-controls">
                        <button class="decrease-btn" data-index="${index}">-</button>
                        <span>${item.quantity}</span>
                        <button class="increase-btn" data-index="${index}">+</button>
                    </div>
                    <div class="item-price">${item.price * item.quantity} 元</div>
                `;
                summaryContainer.appendChild(itemRow);
                totalPrice += item.price * item.quantity;
            });

            // 檢查外送選項
            const deliveryOption = document.querySelector('input[name="delivery"]:checked').value;
            if (deliveryOption === 'priority') {
                totalPrice += 29; // 加上 29 元
            }

            totalRow.innerHTML = `總金額: <strong>${totalPrice} 元</strong>`;
        }

        // 更新數量
        function updateQuantity(index, delta) {
            cart[index].quantity += delta;
            if (cart[index].quantity < 1) {
                cart.splice(index, 1); // 如果數量少於 1，移除該項目
            }
            localStorage.setItem('cart', JSON.stringify(cart));
            renderCartSummary();
        }

        // 綁定按鈕事件
        document.getElementById('cart-summary-items').addEventListener('click', (event) => {
            const index = event.target.dataset.index;
            if (event.target.classList.contains('increase-btn')) {
                updateQuantity(index, 1);
            } else if (event.target.classList.contains('decrease-btn')) {
                updateQuantity(index, -1);
            }
        });

        // 綁定外送選項切換事件
        document.getElementById('delivery-options').addEventListener('change', () => {
            renderCartSummary();
        });

        // 提交訂單
        document.getElementById('checkout-form').addEventListener('submit', (event) => {
            event.preventDefault();
            const address = document.getElementById('address').value;
            const paymentMethod = document.querySelector('input[name="payment-method"]:checked').value;
            const name = document.getElementById('name').value;
            const phone = document.getElementById('phone').value;
            const deliveryOption = document.querySelector('input[name="delivery"]:checked').value;

            const orderDetails = {
                cart,
                address,
                paymentMethod,
                deliveryOption,
                customerInfo: { name, phone },
            };

            console.log('訂單內容:', orderDetails);
            alert('訂單提交成功！謝謝您的購買！');

            cart = [];
            localStorage.removeItem('cart');
            renderCartSummary();
        });

        // 初始化頁面
        renderCartSummary();
    </script>
</body>

</html>
